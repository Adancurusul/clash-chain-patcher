# 文档索引

本目录包含Clash Chain Patcher项目的所有技术文档。

---

## 📋 项目管理文档

### [项目信息.md](项目信息.md)
项目基本信息、技术栈、架构概览

### [需求文档.md](需求文档.md)
详细的功能需求、用户场景、验收标准

### [roadmap.md](roadmap.md)
版本规划、开发路线图、里程碑

**重要更新**: v0.2.0采用新方案（配置监控+自动合并），废弃OS级别拦截方案

### [progress.md](progress.md)
开发进度跟踪、任务完成情况

---

## 🛠️ 开发文档

### [dev.md](dev.md)
开发环境配置、构建说明、调试指南

### [开发计划-Core模块.md](开发计划-Core模块.md)
Core模块（本地SOCKS5服务器）的详细开发计划

**状态**: ✅ 已完成 (Task 1.1-1.6)

### [测试计划-Core模块.md](测试计划-Core模块.md)
Core模块的测试用例和测试结果

**结果**: ✅ 9/9测试全部通过 (2026-02-02)

---

## 📚 技术方案文档

### ✅ 推荐方案

#### [方案优化-自动配置监控.md](方案优化-自动配置监控.md) ⭐ **推荐**
**最新方案**: 配置文件监控 + 自动合并

**核心功能**:
1. GUI管理上游代理列表
2. 健康检查和状态显示
3. 监控Clash配置文件变化
4. 自动合并Local-Chain-Proxy到配置
5. 可选Clash API自动化

**优势**:
- ✅ 纯配置文件操作，无需系统权限
- ✅ 跨平台兼容（Windows/macOS/Linux）
- ✅ 用户体验好（GUI操作）
- ✅ 完全免费
- ✅ 符合项目设计理念

**实现计划**:
- Phase 1: Core模块 (✅ 已完成)
- Phase 2: 配置管理和监控 (⏳ 开发中)
- Phase 3: GUI集成 (📋 规划中)

---

### 📖 参考文档

#### [技术方案-动态代理.md](技术方案-动态代理.md)
动态代理服务器的技术架构和实现细节

**状态**: 部分实现（单上游转发已完成）

#### [技术调研-Clash-API自动化.md](技术调研-Clash-API自动化.md)
Clash API的功能调研和自动化方案

**内容**:
- Clash API端点说明
- 自动重载配置
- 自动切换节点
- 完整自动化流程示例代码

**状态**: 可选功能，v0.3.0考虑实现

---

### ❌ 已废弃方案

#### [解决方案-Clash全局出站代理.md](解决方案-Clash全局出站代理.md) ❌ **已废弃**
**问题**: 使用 `dialer-proxy` 导致流量顺序错误
- ❌ 实际: Clash → 本地代理 → 上游 → 节点 → 互联网
- ✅ 期望: Clash → 节点 → 本地代理 → 上游 → 互联网

**请改用**: [方案优化-自动配置监控.md](方案优化-自动配置监控.md)

#### [Windows代理链配置指南.md](Windows代理链配置指南.md) ⚠️ **备选方案**
OS级别拦截方案（Proxifier、iptables等）

**状态**: 可作为备选方案，但不推荐作为主要实现
**适用场景**:
- 需要拦截Clash进程所有流量
- 不想修改Clash配置
- 可以接受额外的系统级工具

**问题**:
- ❌ Windows需要Proxifier（$39.95）
- ❌ 配置相对复杂
- ❌ 需要系统权限（Linux: iptables）

---

## 📖 用户文档

### [使用指南-代理链配置.md](使用指南-代理链配置.md)
完整的用户使用指南

**内容**:
1. 静态配置方式（v0.1.x）
2. 动态代理方式（v0.2.0）
3. 工作原理详解
4. 为什么会看到上游SOCKS5 IP
5. 常见问题FAQ

### [FAQ-配置持久化.md](FAQ-配置持久化.md)
解决Clash订阅更新后配置丢失的问题

**解决方案**:
1. ✅ 自动合并脚本 (scripts/merge-clash-config.sh)
2. Clash Preprocessor/Mixin
3. 配置覆盖功能
4. GUI静态配置

**新方案**: v0.2.0将内置自动监控和合并功能

---

## 🔧 脚本文件

### [scripts/merge-clash-config.sh](../scripts/merge-clash-config.sh)
自动合并脚本 - 在Clash订阅更新后运行

**功能**:
- 自动添加Local-Chain-Proxy节点
- 添加到所有select类型代理组
- 自动备份原配置
- 幂等性（不会重复添加）

**使用**:
```bash
./scripts/merge-clash-config.sh ~/.config/clash/config.yaml
```

**v0.2.0集成**: 此脚本功能将集成到Core模块中

---

## 📊 文档状态总览

| 文档 | 状态 | 最后更新 | 用途 |
|------|------|---------|------|
| 方案优化-自动配置监控.md | ✅ 最新 | 2026-02-02 | **推荐方案** |
| 需求文档.md | ✅ 已更新 | 2026-02-02 | 反映v0.2.0新需求 |
| roadmap.md | ✅ 已更新 | 2026-02-02 | 反映新开发计划 |
| 测试计划-Core模块.md | ✅ 完成 | 2026-02-02 | 9/9测试通过 |
| 使用指南-代理链配置.md | ✅ 最新 | 2026-02-02 | 详细使用说明 |
| FAQ-配置持久化.md | ✅ 最新 | 2026-02-02 | 配置持久化方案 |
| 技术调研-Clash-API自动化.md | ✅ 最新 | 2026-02-02 | API调研 |
| 解决方案-Clash全局出站代理.md | ❌ 已废弃 | 2026-02-02 | 不推荐使用 |
| Windows代理链配置指南.md | ⚠️ 备选 | 2026-02-02 | OS级别方案 |

---

## 🚀 快速导航

### 我想了解项目
→ 从 [项目信息.md](项目信息.md) 开始

### 我想使用这个工具
→ 阅读 [使用指南-代理链配置.md](使用指南-代理链配置.md)

### 我遇到订阅更新覆盖配置的问题
→ 查看 [FAQ-配置持久化.md](FAQ-配置持久化.md)

### 我想参与开发
→ 阅读 [dev.md](dev.md) 和 [roadmap.md](roadmap.md)

### 我想了解v0.2.0的新功能
→ 阅读 [方案优化-自动配置监控.md](方案优化-自动配置监控.md)

### 我想了解Core模块测试结果
→ 查看 [测试计划-Core模块.md](测试计划-Core模块.md)

---

## 🔄 版本历史

### v0.2.0 (开发中)
- 采用新方案：配置监控 + 自动合并
- 废弃OS级别拦截方案
- Core模块（本地SOCKS5服务器）已完成
- 测试全部通过（9/9）

### v0.1.2 (当前版本)
- 静态配置修改
- Windows兼容性修复
- CI/CD发布流程

---

最后更新: 2026-02-02
